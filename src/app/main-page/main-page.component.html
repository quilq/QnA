<div class="full-page" fxLayout.gt-md="row" fxLayout.lt-lg="column" fxLayoutAlign="space-between none">
  <div class="left" fxFlex="70">
    <div>
      <mat-expansion-panel hideToggle [expanded]="open" (opened)="setOpen()">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <mat-icon matSuffix>add</mat-icon> Ask your question
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div fxLayout="column">
          <mat-form-field appearance="outline">
            <textarea matInput placeholder="Your question" rows="3" #newQuestion autocomplete="off"></textarea>
          </mat-form-field>
          <mat-form-field appearance="fill">
            <input matInput matInput placeholder="tag" appearance="legacy" autocomplete="off" #tag>
          </mat-form-field>
        </div>
        <mat-action-row>
          <button mat-raised-button (click)="onCreateQuestion(newQuestion, tag)">Ok</button>
        </mat-action-row>
      </mat-expansion-panel>
    </div>

    <a (click)="showPopularTags()" mat-button class="bigSize no-hover-effect top-margin">Recent Questions</a>

    <div *ngFor="let question of questionsToShow; let i = index" class="all-questions">
      <div fxLayout="row" fxLayoutAlign="space-between none">
        <div>

          <p [routerLink]="['/answers', question._id]" class="hight-light">
            {{question.question}}
          </p>
          <button mat-stroked-button color="primary" [routerLink]="['/answers', question._id]">
            {{question.answers.length}} answers
          </button>
          <p>
            <mat-icon class="small-icon">folder</mat-icon> {{question.tag}}
          </p>
          <p>
            <mat-icon class="small-icon" matSuffix>person</mat-icon>
            {{question.askedByUser}}
          </p>

        </div>
        <span fxLayout="row" *ngIf="canEdit()">
          <p (click)="onUpdateQuestion(i)" matTooltip="Edit question">
            <mat-icon class="small-icon" matSuffix>edit</mat-icon>
          </p>
          <p (click)="onDeleteQuestion(i)" matTooltip="Delete question">
            <mat-icon class="small-icon" matSuffix>clear</mat-icon>
          </p>
        </span>
      </div>
      <div *ngIf="editable[i]">
        <mat-form-field>
          <textarea matInput placeholder="Edit this question" #updatedQuestion></textarea>
        </mat-form-field>
        <div>
          <button mat-raised-button (click)="onCancel(i)">Cancel</button>
          <button mat-raised-button (click)="onUpdate(i, updatedQuestion.value)">Update</button>
        </div>
      </div>
      <mat-divider></mat-divider>
    </div>

    <mat-paginator [length]="totalItems" [pageSize]="itemsPerPage" [pageSizeOptions]="itemsPerPageOptions"
      showFirstLastButtons>
    </mat-paginator>
  </div>

  <div class="right" fxFlex="30" fxShow fxHide.lt-lg="true">
    <div>
      <mat-form-field floatLabel="never">
        <input matInput type="search" placeholder="Search" #search>
      </mat-form-field>
      <a mat-button>
        <mat-icon (click)="findQuestions(search.value)">search</mat-icon>
      </a>
    </div>
    <a (click)="showPopularTags()" mat-button class="bigSize no-hover-effect">Popular tags</a>
    <div *ngFor="let tag of allTags" class="all-tags hight-light">
      <p (click)="filterTag(tag)">{{ tag }}</p>
      <mat-divider class="margin"></mat-divider>
    </div>
  </div>
</div>